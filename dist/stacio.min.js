var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var d=ba;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&aa(d,a,{configurable:!0,writable:!0,value:b})}}
ca("Math.hypot",function(a){return a?a:function(a,d,c){a=Number(a);d=Number(d);var b,g=Math.max(Math.abs(a),Math.abs(d));for(b=2;b<arguments.length;b++)g=Math.max(g,Math.abs(arguments[b]));if(1E100<g||1E-100>g){if(!g)return g;a/=g;d/=g;var h=a*a+d*d;for(b=2;b<arguments.length;b++){var l=Number(arguments[b])/g;h+=l*l}return Math.sqrt(h)*g}h=a*a+d*d;for(b=2;b<arguments.length;b++)l=Number(arguments[b]),h+=l*l;return Math.sqrt(h)}});function da(a,b){this.x=a;this.y=b};function f(a,b,d,c){this.V=a;this.W=b;this.$=a+d;this.aa=b+c;this.left=this.V;this.top=this.W;this.width=d;this.height=c;this.v=function(){return new da((this.V+this.$)/2|0,(this.W+this.aa)/2|0)};this.a=function(a){return this.V<=a.$&&this.$>=a.V&&this.W<=a.aa&&this.aa>=a.W}};function ea(){this.i=!1;this.l=this.h=0}ea.prototype.update=function(){this.i?(this.h++,this.l=0):(this.h=0,this.l++)};function fa(a){this.keys=Array(256);for(var b=0;256>b;b++)this.keys[b]=new ea;a.tabIndex=0;var d=this;a.addEventListener("keydown",function(a){ha(d,a,!0)});a.addEventListener("keyup",function(a){ha(d,a,!1)})}fa.prototype.update=function(){for(var a=0;256>a;a++)this.keys[a].update()};function ha(a,b,d){b.stopPropagation();b.preventDefault();b=b.keyCode;0<=b&&256>b&&(a.keys[b].i=d)};function ia(a){this.a=a;this.J=this.I=this.c=this.b=this.y=this.x=0;this.i=!1;this.l=this.h=0;a=a.b;var b=this.g.bind(this);a.addEventListener("mousedown",b);a.addEventListener("mouseup",b);a.addEventListener("mousemove",b);a.addEventListener("contextmenu",b);b=this.ba.bind(this);a.addEventListener("touchstart",b);a.addEventListener("touchend",b);a.addEventListener("touchcancel",b);a.addEventListener("touchmove",b)}
ia.prototype.update=function(){this.I=this.x-this.b;this.J=this.y-this.c;this.b=this.x;this.c=this.y;this.i?(this.h++,this.l=0):(this.h=0,this.l++)};ia.prototype.g=function(a){a.stopPropagation();a.preventDefault();ja(this,a.clientX,a.clientY);"mousedown"===a.type&&(this.i=!0,this.a.b.focus());"mouseup"===a.type&&(this.i=!1)};ia.prototype.ba=function(a){a.stopPropagation();a.preventDefault();0<a.touches.length?(a=a.touches[0],ja(this,a.clientX,a.clientY),this.i=!0):this.i=!1};
function ja(a,b,d){var c=a.a.b.getBoundingClientRect(),e=c.width/c.height;if(.01<e-a.a.aspectRatio){var g=a.a.aspectRatio*c.height;c=new f(Math.floor((c.width-g)/2),0,g,c.height)}-.01>e-a.a.aspectRatio&&(e=c.width/a.a.aspectRatio,c=new f(0,Math.floor((c.height-e)/2),c.width,e));a.x=a.a.width*(b-c.left)/c.width|0;a.y=a.a.height*(d-c.top)/c.height|0}function ka(a,b,d,c){return k.x>=a&&k.x<a+d&&k.y>=b&&k.y<b+c};var la=[0,-1,1,0],ma=[-1,0,0,1],na=[1,1,1,1];function oa(a,b,d){b=pa(a,a.VERTEX_SHADER,b);d=pa(a,a.FRAGMENT_SHADER,d);var c=a.createProgram();a.attachShader(c,b);a.attachShader(c,d);a.linkProgram(c);return c}function pa(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b}
function qa(a){var b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);var d=a.RGBA,c=a.RGBA,e=a.UNSIGNED_BYTE;a.texImage2D(a.TEXTURE_2D,0,d,1,1,0,c,e,new Uint8Array([0,0,0,0]));var g=new Image;g.onload=function(){a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,d,c,e,g);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.NEAREST);a.generateMipmap(a.TEXTURE_2D);b.loaded=!0;b.width=g.width;b.height=g.height};g.src="img/graphics.png";return b};function ra(a,b){this.x=a;this.y=b;this.Ia=0;this.G=!0;this.Ea=this.visible=!1;this.Aa=this.Y=0;this.Da=null}function sa(){this.height=this.width=256;this.Fa=null;this.ca=new Uint8Array(262144);this.La=new Float32Array([256,256]);this.clear()}sa.prototype.clear=function(){for(var a=0;a<this.ca.length;a++)this.ca[a]=255};
sa.prototype.Ca=function(a){this.Fa=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.Fa);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.ca);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)};
function ta(){this.height=this.width=256;this.f=Array(256);this.b=Array(3);this.ia=new Float32Array(2);for(var a=0;256>a;a++){this.f[a]=Array(256);for(var b=0;256>b;b++)this.f[a][b]=new ra(b,a)}for(a=0;3>a;a++)this.b[a]=new sa}
ta.prototype.Ca=function(a){this.ba=a;this.va=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.va);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,1,-1,1,1,1,1,1,0,-1,-1,0,1,1,1,1,0,-1,1,0,0]),a.STATIC_DRAW);this.a=oa(a,"precision highp float;attribute vec2 position;attribute vec2 texture;varying vec2 pixelCoord;varying vec2 texCoord;uniform vec2 viewOffset;uniform vec2 viewportSize;uniform vec2 mapSize;void main(void) {   pixelCoord = (texture * viewportSize) + viewOffset;   texCoord = pixelCoord / mapSize / 16.0;   gl_Position = vec4(position, 0.0, 1.0);}","precision highp float;varying vec2 pixelCoord;varying vec2 texCoord;uniform sampler2D tiles;uniform sampler2D sprites;void main(void) {   vec4 tile = texture2D(tiles, texCoord);   if(tile.x == 1.0 && tile.y == 1.0) { discard; }   vec2 spriteOffset = floor(tile.xy * 256.0) * 16.0;   vec2 spriteCoord = mod(pixelCoord, 16.0);   gl_FragColor = texture2D(sprites, (spriteOffset + spriteCoord) / 1024.0);   gl_FragColor.a = tile.a;}");
this.ua=a.getAttribLocation(this.a,"position");this.qa=a.getAttribLocation(this.a,"texture");this.Ka=a.getUniformLocation(this.a,"viewportSize");this.Ja=a.getUniformLocation(this.a,"viewOffset");this.wa=a.getUniformLocation(this.a,"mapSize");this.ya=a.getUniformLocation(this.a,"tiles");this.xa=a.getUniformLocation(this.a,"sprites");for(var b=0;b<this.b.length;b++)this.b[b].Ca(a)};
function n(a,b,d,c){var e=q;e.f[b][a].Ia=d;e.f[b][a].G=c;c=e.b[0];a=4*(b*c.width+a);c.ca[a]=0===d?255:(d-1)%64|0;c.ca[a+1]=0===d?255:(d-1)/64|0}function r(a,b,d){return 0>b||b>=a.width||0>d||d>=a.height?null:a.f[d][b]}function ua(a,b){return(a=r(q,a,b))?a.Ia:0}function u(a,b){a=r(q,a,b);return!a||a.G}ta.prototype.U=function(a,b){return(a=r(this,a,b))&&a.visible};ta.prototype.U=function(a,b){return a<this.C||a>this.c||b<this.H||b>this.g?!1:this.f[b][a].visible};function va(){var a=q,b=x.x/16|0,d=x.y/16|0;a.na=b;a.pa=d;a.C=Math.max(0,b-12);a.H=Math.max(0,d-12);a.c=Math.min(a.width-1,b+12);a.g=Math.min(a.height-1,d+12);for(var c=a.H;c<=a.g;c++)for(var e=a.C;e<=a.c;e++)a.f[c][e].Ea|=a.f[c][e].visible,a.f[c][e].visible=!1;a.f[d][b].visible=!0;wa(a,1,1);xa(a,1,1);wa(a,1,-1);xa(a,1,-1);wa(a,-1,1);xa(a,-1,1);wa(a,-1,-1);xa(a,-1,-1)}
function wa(a,b,d){var c=[],e=[],g=1,h=0,l=0,t=0,m,p;for(p=a.pa+d;p>=a.H&&p<=a.g;p+=d,l=h,++g){var B=.5/g;var w=-1;var I=Math.floor(t*g+.5);for(m=a.na+I*b;I<=g&&m>=a.C&&m<=a.c;m+=b,++I,w=C){var E=!0;var W=!1;var N=I/g;var C=N+B;if(0<l)if(a.f[p-d][m].visible&&!a.f[p-d][m].G||a.f[p-d][m-b].visible&&!a.f[p-d][m-b].G)for(var v=0;v<l&&E;++v){if(w<=e[v]&&C>=c[v])if(a.f[p][m].G)if(w>=c[v]&&C<=e[v]){E=!1;break}else c[v]=Math.min(c[v],w),e[v]=Math.max(e[v],C),W=!0;else if(N>c[v]&&N<e[v]){E=!1;break}}else E=
!1;E&&(a.f[p][m].visible=!0,a.f[p][m].G&&(t>=w?t=C:W||(c[h]=w,e[h++]=C)))}}}
function xa(a,b,d){var c=[],e=[],g=1,h=0,l=0,t=0,m,p;for(m=a.na+b;m>=a.C&&m<=a.c;m+=b,l=h,++g){var B=.5/g;var w=-1;var I=Math.floor(t*g+.5);for(p=a.pa+I*d;I<=g&&p>=a.H&&p<=a.g;p+=d,++I,w=C){var E=!0;var W=!1;var N=I/g;var C=N+B;if(0<l)if(a.f[p][m-b].visible&&!a.f[p][m-b].G||a.f[p-d][m-b].visible&&!a.f[p-d][m-b].G)for(var v=0;v<l&&E;++v){if(w<=e[v]&&C>=c[v])if(a.f[p][m].G)if(w>=c[v]&&C<=e[v]){E=!1;break}else c[v]=Math.min(c[v],w),e[v]=Math.max(e[v],C),W=!0;else if(N>c[v]&&N<e[v]){E=!1;break}}else E=
!1;E&&(a.f[p][m].visible=!0,a.f[p][m].G&&(t>=w?t=C:W||(c[h]=w,e[h++]=C)))}}};function ya(a){this.ba=a;var b=oa(a,"uniform vec2 u_viewportSize;attribute vec2 a_position;attribute vec2 a_texCoord;attribute vec4 a_color;varying vec2 v_texCoord;varying vec4 v_color;void main() {vec2 zeroToOne = a_position / u_viewportSize;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;v_color = a_color;}","precision mediump float;uniform sampler2D u_image;varying vec2 v_texCoord;varying vec4 v_color;void main() {gl_FragColor = texture2D(u_image, v_texCoord);if (gl_FragColor.a < 0.1) discard;if (v_color.a > 0.5) gl_FragColor = v_color;}");
this.wa=b;this.ya=a.getUniformLocation(b,"u_viewportSize");this.na=a.getAttribLocation(b,"a_position");this.pa=a.getAttribLocation(b,"a_texCoord");this.U=a.getAttribLocation(b,"a_color");this.H=new Float32Array(2);this.qa=a.createBuffer();this.xa=a.createBuffer();this.ua=a.createBuffer();this.oa=qa(a);this.b=new Float32Array(65536);this.a=0;this.c=new Float32Array(65536);this.g=0;this.ia=new Uint8Array(65536);this.va=new DataView(this.ia.buffer);this.C=0}
function y(a,b,d,c){var e=z.c;a=a.toUpperCase().split("\n");for(var g=0;g<a.length;g++)for(var h=0;h<a[g].length;h++){var l=a[g].charCodeAt(h);33<=l&&127>=l&&za(e,b+4*h,d+8*g,8*(l-33),0,8,10,c)}}
function za(a,b,d,c,e,g,h,l,t,m){var p=a.oa;if(p.loaded){t=b+Math.abs(void 0!==t?t:g);m=d+(void 0!==m?m:h);var B=c/p.width,w=e/p.height;c=(c+g)/p.width;e=(e+h)/p.height;l=l||0;a.b[a.a++]=b;a.b[a.a++]=d;a.b[a.a++]=t;a.b[a.a++]=d;a.b[a.a++]=b;a.b[a.a++]=m;a.c[a.g++]=B;a.c[a.g++]=w;a.c[a.g++]=c;a.c[a.g++]=w;a.c[a.g++]=B;a.c[a.g++]=e;a.b[a.a++]=b;a.b[a.a++]=m;a.b[a.a++]=t;a.b[a.a++]=d;a.b[a.a++]=t;a.b[a.a++]=m;a.c[a.g++]=B;a.c[a.g++]=e;a.c[a.g++]=c;a.c[a.g++]=w;a.c[a.g++]=c;a.c[a.g++]=e;for(b=0;6>b;b++)a.va.setUint32(a.C,
l,!1),a.C+=4}};function Aa(a){var b=a.getContext("webgl",{alpha:!1,antialias:!1});if(b){this.b=a;this.options={};this.ba=b;this.aspectRatio=this.height=this.width=1;this.a={x:1,y:1};b.disable(b.DEPTH_TEST);b.enable(b.BLEND);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);this.c=new ya(b);this.H=new fa(a);this.keys=this.H.keys;this.g=new ia(this);q=new ta;A=[];D=[];F=[];for(a=0;4>a;a++){D.push(Array(4));for(var d=0;4>d;d++)D[a][d]=null}for(a=0;10>a;a++){d={level:a,x:0,y:0,parent:null,X:0,children:[],ta:[]};if(0===
a)d.x=Math.floor(4*Math.random()),d.y=Math.floor(4*Math.random());else{var c=F[Math.floor(Math.random()*F.length)];c.children.push(d);c.X--;d.parent=c;0<c.x&&!D[c.y][c.x-1]&&(d.x=c.x-1,d.y=c.y);0<c.y&&!D[c.y-1][c.x]&&(d.x=c.x,d.y=c.y-1);3>c.x&&!D[c.y][c.x+1]&&(d.x=c.x+1,d.y=c.y);3>c.y&&!D[c.y+1][c.x]&&(d.x=c.x,d.y=c.y+1)}d.rect=new f(40*d.x,40*d.y,40,40);A.push(d);D[d.y][d.x]=d;F=[];for(d=0;d<A.length;d++)c=A[d],c.X=0,0<c.x&&!D[c.y][c.x-1]&&c.X++,0<c.y&&!D[c.y-1][c.x]&&c.X++,3>c.x&&!D[c.y][c.x+1]&&
c.X++,3>c.y&&!D[c.y+1][c.x]&&c.X++,3>d&&0<c.children.length&&(c.X=0),0<c.X&&F.push(c)}for(a=0;a<A.length;a++){var e=Ba[0];d=A[a];c=d.ta;var g=new f(d.rect.V+1,d.rect.v().y-2,5,5);G(g);c.push(g);g=new f(d.rect.$-5,d.rect.v().y-2,5,5);G(g);c.push(g);g=new f(d.rect.v().x-2,d.rect.W+1,5,5);G(g);c.push(g);g=new f(d.rect.v().x-2,d.rect.aa-5,5,5);G(g);for(c.push(g);c.length<e.L;){g=Ca(e.P,e.N);var h=Ca(e.O,e.M);g=new f(Ca(d.rect.V+2,d.rect.$-g-3),Ca(d.rect.W+2,d.rect.aa-h-3),g,h);h=!1;for(var l=0;l<c.length;l++)if(g.a(c[l])){h=
!0;break}h||(G(g),c.push(g))}for(e=c.length-1;0<e;e--)h=Math.floor(Math.random()*(e+1)),g=c[e],c[e]=c[h],c[h]=g;for(e=1;e<c.length;e++)g=c[e].v(),h=c[e-1].v(),.5>Math.random()?(Da(h.x,g.x,h.y),Ea(h.y,g.y,g.x)):(Ea(h.y,g.y,h.x),Da(h.x,g.x,g.y));d.parent&&(d.parent.x<d.x?Da(d.rect.V-3,d.rect.V+3,d.rect.v().y):d.parent.x>d.x?Da(d.rect.$-3,d.rect.$+3,d.rect.v().y):d.parent.y<d.y?Ea(d.rect.W-3,d.rect.W+3,d.rect.v().x):d.parent.y>d.y&&Ea(d.rect.aa-3,d.rect.aa+3,d.rect.v().x))}for(a=0;256>a;a++)for(d=0;256>
d;d++)u(d,a)&&(u(d,a+1)?0!==ua(d,a)&&0===ua(d,a+1)?n(d,a,H(J(d,a).D),!0):u(d,a-1)&&u(d-1,a)&&u(d+1,a)&&u(d-1,a-1)&&u(d+1,a-1)&&u(d-1,a+1)&&u(d+1,a+1)||n(d,a,H(J(d,a).D)+6,!0):n(d,a,H(J(d,a).D),!0));x={o:0,name:"Player",x:16*A[0].ta[0].v().x,y:16*A[0].ta[0].v().y,I:0,J:0,direction:2,j:100,fa:100,m:1,F:0,T:2,u:null,s:null,path:null,la:0,za:100,Ha:100,da:0,ga:10,level:1,Ma:[],ra:[Fa,Ga],ea:null,cursor:new da(0,0)};a={Z:0,name:"Radio",x:x.x+32,y:x.y-32};d={Z:1,name:"Blaster",x:x.x+32,y:x.y+32};K=[x];
L=[a,d];M=[];O={x:0,y:0};x.s=null;for(a=0;a<A.length;a++)for(d=A[a],c=d.ta,e=1;e<c.length;e++){g=c[e].v();h=(d.level/3|0)+1;for(l=0;l<h;l++){var t=Ha(g.x,g.y);if(!t)break;var m=H(Ba[a].K);K.push({o:m,level:d.level+1,name:Ia[m].name,x:16*t.R,y:16*t.S,I:0,J:0,direction:2,j:10+5*d.level,fa:10+5*d.level,m:1,F:0,T:4})}8===e&&L.push({Z:2,name:"Blue Key",x:16*g.x+32,y:16*g.y+32})}va();Ja(Ka[4]);q.Ca(b);window.addEventListener("resize",this.C.bind(this),!1);this.C();this.U()}}
Aa.prototype.C=function(){var a=window.innerWidth,b=window.innerHeight;var d=a>b?Math.max(1,Math.min(Math.floor(a/256),Math.floor(b/144))):Math.max(1,Math.min(Math.floor(a/144),Math.floor(b/256)));this.width=Math.round(a/d);this.height=Math.round(b/d);this.aspectRatio=this.width/this.height;this.a.x=this.width/2|0;this.a.y=this.height/2|0;this.b.width=this.width;this.b.height=this.height;this.b.style.left="0";this.b.style.top="0";this.b.style.width=a+"px";this.b.style.height=b+"px"};
Aa.prototype.U=function(){this.H.update();this.g.update();var a=this.ba;a.viewport(0,0,this.width,this.height);a.clearColor(0,0,0,1);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.c.a=0;this.c.g=0;this.c.C=0;this.update&&this.update();a=this.c;var b=this.width,d=this.height;if(a.oa.loaded){var c=a.ba;c.useProgram(a.wa);a.H[0]=b;a.H[1]=d;c.uniform2fv(a.ya,a.H);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,a.oa);c.enableVertexAttribArray(a.na);c.bindBuffer(c.ARRAY_BUFFER,a.qa);c.bufferData(c.ARRAY_BUFFER,
a.b,c.DYNAMIC_DRAW);c.vertexAttribPointer(a.na,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(a.pa);c.bindBuffer(c.ARRAY_BUFFER,a.xa);c.bufferData(c.ARRAY_BUFFER,a.c,c.DYNAMIC_DRAW);c.vertexAttribPointer(a.pa,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(a.U);c.bindBuffer(c.ARRAY_BUFFER,a.ua);c.bufferData(c.ARRAY_BUFFER,a.ia,c.DYNAMIC_DRAW);c.vertexAttribPointer(a.U,4,c.UNSIGNED_BYTE,!0,0,0);c.drawArrays(c.TRIANGLES,0,a.a/2)}requestAnimationFrame(this.U.bind(this))};
function P(a,b,d,c,e,g,h,l,t){za(z.c,a,b,d,c,e,g,h,l,t)}function Q(a,b,d,c){y(a,b-4*a.length/2|0,d,c)};var La=[2,0,1,3],Ia=[{name:"PLAYER",x:0,y:0},{name:"SCIENTIST",x:3,y:0},{name:"SPIDER",x:0,y:6},{name:"HATCHER",x:1,y:6},{name:"SLIMER",x:2,y:6},{name:"FLOATER",x:0,y:8},{name:"CLONER",x:3,y:8},{name:"ALIEN",x:0,y:2},{name:"QUEEN",x:1,y:2}],Ma=[{x:7,y:13},{x:0,y:14},{x:1,y:9}];var Ba=[{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[2,1]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.5],[3,.5]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,
.33],[595,.33]],D:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],
D:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:10,P:5,N:12,O:5,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[2,.333],[3,.333],[4,.333]]},{L:5,P:10,N:12,O:8,M:8,B:[[593,.33],[594,.33],[595,.33]],D:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,
.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]}],q=null,A=null,D=null,F=null;function G(a){var b=a.V,d=a.$,c=a.aa;for(a=a.W;a<c;a++)for(var e=b;e<d;e++)n(e,a,H(J(e,a).B),!1)}function Da(a,b,d){for(var c=Math.min(a,b);c<=Math.max(a,b);c++)n(c,d,H(J(c,d).B),!1)}function Ea(a,b,d){for(var c=Math.min(a,b);c<=Math.max(a,b);c++)n(d,c,H(J(d,c).B),!1)}function Ca(a,b){return Math.floor(Math.random()*(b-a)+a)}
function J(a,b){a=a/40|0;b=b/40|0;b=0>a||4<=a||0>b||4<=b?null:D[b][a];return Ba[(b?b.level:0)%Ba.length]}function H(a){for(var b=Math.random(),d=0,c=0;c<a.length;c++)if(d+=a[c][1],b<d)return a[c][0];return a[a.length-1][0]};var Na=[{w:"Ok hotshot, teleportation complete.\nSystem check. Do you remember the mission?",options:[{text:"ROGER",A:"dialog",ha:4},{text:"UH WHAT?",A:"dialog",ha:1}]},{w:"Mother frakking... Teleportation glitch.\nYou're a lost cause. Want advice anyway?",options:[{text:"YES",A:"dialog",ha:2},{text:"NO",A:"dialog",ha:3}]},{w:"Alright.  Your brain is mush, but we'll try.\nFind the blaster in the room.",options:[{text:"COPY",A:"quest",ma:0}]},{w:"Alright.  Your brain is mush, and you're\nballs deep in aliens who want to kill you.  Good luck.",
options:[{text:"BYE"}]},{w:"Good. How do you wanna run this, soldier?\nWant me to guide you, or comms off?",options:[{text:"GUIDE",A:"dialog",ha:5},{text:"COMMS OFF",A:"dialog",ha:6}]},{w:"Alright.  First things first:\nFind the blaster in the room.",options:[{text:"OK",A:"quest",ma:0}]},{w:"Alright.  You know what you're doing.\nGo get em.",options:[{text:"OVER AND OUT"}]},{w:"Good.  Radar shows alien blood nearby.\nGo kill that ugly bastard.",options:[{text:"ACCEPT",A:"quest",ma:1},{text:"IGNORE"}]},
{w:"Not bad, soldier.  That took guts.\nFind a BLUE key to get out of this sector.",options:[{text:"ACCEPT",A:"quest",ma:2},{text:"IGNORE"}]},{w:"Excellent.  Let's get the frak out of here.\nFind the BLUE door to move to the next sector.",options:[{text:"ACCEPT",A:"quest",ma:3},{text:"IGNORE"}]}],R=!1,Oa=0,Pa=0,Qa;var Ka=[{title:"Find blaster",ja:"item",Z:1,ka:7},{title:"First blood",ja:"kill",o:7,ka:8},{title:"Blue keycard",ja:"item",Z:2,ka:9},{title:"Blue door",ja:"item",Z:2,ka:9},{title:"Pick up radio",ja:"item",Z:0,ka:0}],S=[];function Ja(a){T("Quest accepted: "+a.title,4294902015);S.push(a)}function Ra(a){T("Quest complete: "+a.title,4294902015);void 0!==a.ka&&(a=a.ka,R=!0,Qa=!1,Oa=a,Pa=U)};var Sa=[];function Ta(a,b,d,c,e,g){Sa.push({Ga:a,x:b,y:d,duration:c,Qa:e,color:g,frame:0})};var Fa={Pa:!0,Oa:1,Na:10,Ba:new da(256,448),sa:function(a,b,d){d&&(Ua(a,d,5),Ta(1,d.x,d.y,18),a.F=36,a.za--)}},Ga={Pa:!0,Oa:1,Na:10,Ba:new da(480,416),sa:function(a,b){b&&(a.x=16*b.x,a.y=16*b.y,a.m=0,a.F=1)}};var z=null,Va=0,Wa=0,V=0,U=0,x=null,K=null,L=null,M=null,O=null,Xa=!1,X=null,k=null,Ya=0;
function Za(a,b){x.s=Y(a,b);if(x.s)x.u=null,x.path=null;else if(a=r(q,a,b),a!==x.u){var d=x.x/16|0,c=x.y/16|0;x.u=a;a=x;a:{b=x.u;for(var e=q,g=0;g<e.height;g++)for(var h=0;h<e.width;h++){var l=e.f[g][h];l.Y=Infinity;l.Aa=Math.min(Math.abs(h-b.x),Math.abs(g-b.y));l.Da=null}d=q.f[c][d];d.Y=0;for(d=[d];0<d.length;){c=null;e=-1;g=Infinity;for(h=0;h<d.length;h++)l=d[h],Infinity!==l.Y&&l.Y+l.Aa<g&&(c=l,e=h,g=l.Y+l.Aa);d.splice(e,1);if(c.x===b.x&&c.y===b.y){b=[];for(d=c;d;)b.push(d),d=d.Da;b.reverse();break a}for(e=
0;e<la.length;e++)if(g=c.x+la[e],h=c.y+ma[e],0<=g&&g<q.width&&0<=h&&h<q.height){l=q.f[h][g];var t=c.Y+na[e];t<l.Y&&20>=t&&!q.f[h][g].G&&(l.Y=t,l.Da=c,d.push(l))}}b=null}a.path=b;x.la=0}}function $a(a){return a.x+16>=O.x&&a.y+16>=O.y&&a.x<O.x+z.width&&a.y<O.y+z.height&&q.U(a.x/16|0,a.y/16|0)}function Y(a,b){for(var d=0;d<K.length;d++){var c=K[d];if(!(0>=c.j)&&(c.x/16|0)===a&&(c.y/16|0)===b)return c}return null}
function Ha(a,b){for(var d=0;20>d;d++){for(var c=a-d;c<=a+d;c++){var e=b-d;if(!u(c,e)&&null===Y(c,e))return{R:c,S:e};e=b+d;if(!u(c,e)&&null===Y(c,e))return{R:c,S:e}}for(c=b-d;c<=b+d;c++){e=a-d;if(!u(e,c)&&null===Y(e,c))return{R:e,S:c};e=a+d;if(!u(e,c)&&null===Y(e,c))return{R:e,S:c}}}return null}
function Z(a,b,d,c){a.direction=c;var e=Math.hypot(b,d);c=Math.floor(a.x/16)+b/e;e=Math.floor(a.y/16)+d/e;if(u(c,e))return!1;if(c=Y(c,e)){if(a.o===c.o)return!1;Ua(a,c,2);a.F=18;Ta(1,c.x,c.y,18);return!0}a.I=b;a.J=d;a.F=16/Math.max(Math.abs(b),Math.abs(d));return!0}
function Ua(a,b,d){b.j-=d;Ta(2,b.x+8,b.y-4,40,d.toString(),4278190335);if(0>=b.j){b.j=0;T(b.name+" died",4278190335);b===x.s&&(x.s=null);if(3===b.o)for(T(b.name+" spawns hatchlings",8388863),d=0;3>d;d++){var c=Ha(b.x/16|0,b.y/16|0);if(!c)break;K.push({o:2,level:1,name:Ia[2].name,x:16*c.R,y:16*c.S,I:0,J:0,direction:2,j:10,fa:10,m:1,F:0,T:4})}if(0===a.o){a=5*b.level;x.da+=a;for(Ta(2,x.x+8,x.y-4,40,"+"+a,4278255615);x.da>=x.ga;)x.da-=x.ga,x.ga*=2,x.level++,T("You are now level "+x.level,16711935);for(a=
S.length-1;0<=a;a--)d=S[a],"kill"===d.ja&&d.o===b.o&&(S.splice(a,1),Ra(d))}}}function T(a,b){M.push({text:a,color:b});5<M.length&&M.splice(0,M.length-5)}function ab(){0===V&&K.sort(function(a,d){return Math.hypot(a.x-x.x,a.y-x.y)-Math.hypot(d.x-x.x,d.y-x.y)});V++;if(V>=K.length)for(var a=V=0;a<K.length;a++)0<K[a].j&&(K[a].m=1)}function bb(a){if(R){var b=Na[Oa];0>a||a>b.options.length||(a=b.options[a],"dialog"===a.A?(a=a.ha,R=!0,Qa=!1,Oa=a,Pa=U):"quest"===a.A?(R=!1,Ja(Ka[a.ma])):R=!1)}}
function cb(){if(R){if(!(30>U-Pa)){var a=(z.width-160)/2|0,b=(z.height-160)/2|0;1===X[32].l?Qa=!0:1===X[49].l||1===k.l&&ka(a,b+64,80,8)?bb(0):(1===X[50].l||1===k.l&&ka(a,b+80,80,8))&&bb(1)}}else if(Xa)1===X[78].h&&(Xa=!1);else if(0<x.j)for(;;){a=K[V];if(0<a.m&&0===a.F)if(0===V)if(0>=x.j)x.m=0;else{var d=x.x/16|0;b=x.y/16|0;if(0!==k.I||0!==k.J)x.cursor.x=k.x,x.cursor.y=k.y,x.cursor.R=(O.x+x.cursor.x)/16|0,x.cursor.S=(O.y+x.cursor.y)/16|0;if(x.ea)if(1===X[98].h||1===X[40].h)x.cursor.y+=16,x.cursor.S++;
else if(1===X[100].h||1===X[37].h)x.cursor.x-=16,x.cursor.R--;else if(1===X[102].h||1===X[39].h)x.cursor.x+=16,x.cursor.R++;else if(1===X[104].h||1===X[38].h)x.cursor.y-=16,x.cursor.S--;else if(1===X[27].h)x.u=null,x.path=null,x.ea=null;else{if(1===X[13].h||1===k.l)Za(x.cursor.R,x.cursor.S),b=x.ea,b.sa&&b.sa(x,x.u,x.s),x.ea=null,x.u=null,x.s=null,x.path=null}else if(k.i&&k.y<z.height-24)Za((O.x+k.x)/16|0,(O.y+k.y)/16|0);else if(1===X[9].h){b=x.s?K.indexOf(x.s):0;for(var c=b+1;0===c||c>=K.length||
0>=K[c].j||!$a(K[c]);)if(c++,c>=K.length&&(c=0),c===b){c=-1;break}0<c?x.s=K[c]:x.s=null}else if(1===X[78].h)Xa=!0;else{c=null;if(x.path){for(c=x.path[x.la];c&&c.x===d&&c.y===b;)x.la++,c=x.la<x.path.length?x.path[x.la]:null;c||(x.u=null,x.path=null)}var e=X[100].i||X[37].i||c&&c.x<d;d=X[102].i||X[39].i||c&&c.x>d;var g=X[104].i||X[38].i||c&&c.y<b,h=X[101].i;X[98].i||X[40].i||c&&c.y>b?Z(x,0,x.T,2):e?Z(x,-x.T,0,3):h?x.m=0:d?Z(x,x.T,0,1):g&&Z(x,0,-x.T,0);for(b=0;b<x.ra.length;b++)if(c=x.ra[b],1===X[49+
b].h||1===z.g.l&&ka(24*b,z.height-24,24,24))x.s?c.sa(x,x.u,x.s):(x.ea=c,x.cursor.x=x.x-O.x,x.cursor.y=x.y-O.y,x.cursor.R=(O.x+x.cursor.x)/16|0,x.cursor.S=(O.y+x.cursor.y)/16|0)}}else 0>=a.j?a.m=0:$a(a)?x.x<a.x&&Z(a,-a.T,0,3)||x.x>a.x&&Z(a,a.T,0,1)||x.y<a.y&&Z(a,0,-a.T,0)||x.y>a.y&&Z(a,0,a.T,2)||0!==a.I||0!==a.J||(a.m=0):a.m=0;if(0<a.F){if(0!==a.I||0!==a.J)a.x+=a.I,a.y+=a.J;a.F--;if(0===a.F&&(a.I=0,a.J=0,a.m--,0===a.o)){for(b=L.length-1;0<=b;b--)if(c=L[b],c.x===a.x&&c.y===a.y)for(L.splice(b,1),x.Ma.push(c),
T("Picked up: "+c.name,16777215),e=S.length-1;0<=e;e--)d=S[e],"item"===d.ja&&d.o===c.o&&(S.splice(e,1),Ra(d));va()}}0>=a.m&&(a.m=0,ab());if(0===V&&0<a.m)break;if(0<a.F)break}X[65].i&&(Ya=10);Wa++;16<Wa&&(Wa=0,Va++);if(z.c.oa&&z.c.oa.loaded){O.x=Math.max(0,x.x-(z.width/2|0)+8);O.y=Math.max(0,x.y-(z.height/2|0)+8);0<Ya--&&(O.x+=4*Math.random()-2,O.y+=4*Math.random()-2);if(R){if(R&&(a=(z.width-160)/2|0,b=(z.height-160)/2|0,P(a+64,b,128,608,32,32),c=Na[Oa],e=U-Pa,e=Qa?c.w.length:Math.min(c.w.length,Math.floor(e/
2)),y(c.w.substr(0,e),a,b+32,void 0),e===c.w.length))for(e=0;e<c.options.length;e++)y(c.options[e].text,a,b+64+16*e,void 0)}else{a=q;b=O.x;c=O.y;h=z.width;var l=z.height;e=a.ba;e.enable(e.BLEND);e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);e.useProgram(a.a);e.bindBuffer(e.ARRAY_BUFFER,a.va);e.enableVertexAttribArray(a.ua);e.enableVertexAttribArray(a.qa);e.vertexAttribPointer(a.ua,2,e.FLOAT,!1,16,0);e.vertexAttribPointer(a.qa,2,e.FLOAT,!1,16,8);a.ia[0]=h;a.ia[1]=l;e.uniform2fv(a.Ka,a.ia);e.activeTexture(e.TEXTURE0);
e.uniform1i(a.xa,0);e.activeTexture(e.TEXTURE1);e.uniform1i(a.ya,1);d=b/16|0;g=c/16|0;h=(b+h)/16|0;l=(c+l)/16|0;for(var t=0;t<a.b.length;t++){for(var m=a.b[t],p=g;p<=l;p++)for(var B=d;B<=h;B++){var w=a.U(B,p)?255:(w=r(a,B,p))&&w.Ea?144:0;m.ca[4*(p*m.width+B)+3]=w}e.uniform2f(a.Ja,b,c);e.uniform2fv(a.wa,m.La);e.bindTexture(e.TEXTURE_2D,m.Fa);e.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,e.RGBA,e.UNSIGNED_BYTE,m.ca);e.drawArrays(e.TRIANGLES,0,6)}x.u&&(a=16*x.u.x-O.x,b=16*x.u.y-O.y,c=640,u(x.u.x,
x.u.y)&&(c=688),P(a,b,c,176,16,16));x.ea&&P(x.cursor.x,x.cursor.y,640,144,16,16);for(a=0;a<L.length;a++)b=L[a],$a(b)&&P(b.x-O.x,b.y-O.y,256+16*Ma[b.Z].x,224+16*Ma[b.Z].y,16,16);for(a=0;a<K.length;a++)b=K[a],$a(b)&&(c=b.x-O.x,e=b.y-O.y,0>=b.j?(d=496,g=432):(d=16*(4*Ia[b.o].x+La[b.direction]),g=16*(2*Ia[b.o].y+Va%2)+16),b===x.s&&P(c,e,720,176,16,16),P(c,e,d,g,16,16));for(a=Sa.length-1;0<=a;a--)b=Sa[a],c=b.x-O.x,e=b.y-O.y,1===b.Ga?P(c,e,128+16*Math.floor(b.frame/6),304,16,16):2===b.Ga&&Q(b.Qa,c,e-Math.min(4,
Math.floor(b.frame/2)),b.color),b.frame++,b.frame>=b.duration&&Sa.splice(a,1);for(b=a=0;b<K.length;b++)c=K[b],c!==x&&0>=c.j||!$a(c)||(c===x?(e=c.j/c.fa,y(c.name,1,a,void 0),P(0,a+7,544,208,32,12),P(2,a+9,544,224,8,8,void 0,Math.round(28*e)),y(c.j+"/"+c.fa,3,a+10,void 0),e=x.za/x.Ha,y("AMMO",33,a,void 0),P(32,a+7,544,208,32,12),P(34,a+9,552,224,8,8,void 0,Math.round(28*e)),y(c.za+"/"+c.Ha,35,a+10,void 0),e=x.da/x.ga,y("LEVEL "+x.level,65,a,void 0),P(64,a+7,544,208,32,12),P(66,a+9,568,224,8,8,void 0,
Math.round(28*e)),y(c.da+"/"+c.ga,67,a+10,void 0)):(e=c.j/c.fa,y(c.name+" ["+c.level+"]",1,a,void 0),P(0,a+7,544,208,32,12),P(2,a+9,560,224,8,8,void 0,Math.round(28*e)),y(c.j+"/"+c.fa,3,a+10,void 0)),a+=24);if(0<S.length)for(y("OBJECTIVES:",z.width-60,0,void 0),a=0;a<S.length;a++)y(S[a].title,z.width-60,8+8*a,void 0);a=z.height-24-8*M.length;for(b=0;b<M.length;b++)y(M[b].text,1,a+8*b,M[b].color);for(a=0;6>a;a++)P(24*a,z.height-24,512,208,24,24),a<x.ra.length&&(b=x.ra[a],P(24*a+4,z.height-24+4,b.Ba.x,
b.Ba.y,16,16));Xa&&(P(0,0,512,256,144,144,128,z.width,z.height),a=(z.width-144)/2|0,b=(z.height-144)/2|0,P(a,b,512,256,144,144),P(a+10,b+9,480,416,16,16),y("2",a+21,b+19,16711935),P(a+22,b+33,464,416,16,16),y("0",a+33,b+43,16711935),P(a+22,b+57,624,160,16,16),y("0",a+33,b+67,16711935),P(a+22,b+81,448,416,16,16),y("0",a+33,b+91,16711935),P(a+56,b+9,336,416,16,16),y("0",a+67,b+19,16711935),P(a+68,b+33,336,448,16,16),y("0",a+79,b+43,16711935),P(a+68,b+57,272,400,16,16),y("0",a+79,b+67,16711935),P(a+
68,b+81,400,432,16,16),y("0",a+79,b+91,16711935),P(a+102,b+9,128,354,16,16),y("0",a+113,b+19,16711935),P(a+114,b+33,592,160,16,16),y("0",a+125,b+43,16711935),P(a+114,b+57,272,400,16,16),y("0",a+125,b+67,16711935),P(a+114,b+81,352,400,16,16),y("0",a+125,b+91,16711935),y("1: Leap 2 squares",a+8,b+106,4294967295),y("2: Leap 3 squares",a+8,b+114,4294967295),y("3: Leap 4 squares",a+8,b+122,16711935),y("4: Leap 5 squares",a+8,b+130,2155905279))}U++}};var db=new Audio("https://static.cody.xyz/syndicate.lubiki.pl/synd_music_ingame_standard_final_mq.mp3");function eb(){Q("STACIO",z.a.x,30);P(z.a.x-16,z.a.y-16,640,208,32,32);if(1===z.keys[13].h||1===z.g.l)z.update=fb}function fb(){Q("STACIO",z.a.x,30);Q("NEW GAME",z.a.x,80);Q("CONTINUE",z.a.x,90,2155905279);Q("ENTER SEED",z.a.x,100);Q("TUTORIAL",z.a.x,110);Q("HIGH SCORES",z.a.x,120);Q("CREDITS",z.a.x,130);if(1===z.keys[13].h||1===z.g.l)z.update=ka(z.a.x-20,130,40,10)?gb:cb}
function gb(){Q("STACIO",z.a.x,20);var a=z.a.x-40;y("CODE AND DESIGN:",a,40,2155905279);y("CODY.XYZ",a+20,50,void 0);y("GRAPHICS:",a,60,2155905279);y("ORYX DEISGN LAB",a+20,70,void 0);y("oryxdesignlab.com",a+20,80,void 0);y("FONT:",a,90,2155905279);y("LEXALOFFLE",a+20,100,void 0);y("LEXALOFFLE.COM",a+20,110,void 0);y("MUSIC:",a,120,2155905279);y("ERIC MATYAS",a+20,130,void 0);y("WWW.SOUNDIMAGE.ORG",a+20,140,void 0);if(1===z.keys[13].h||1===z.g.l)z.update=fb}
(function(){function a(){b.removeEventListener("click",a);db.loop=!0;db.play()}var b=document.querySelector("canvas");b.addEventListener("click",a);z=new Aa(b);z.update=eb;X=z.keys;k=z.g})();
