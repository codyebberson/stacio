var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var d=ba;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&aa(d,a,{configurable:!0,writable:!0,value:b})}}
ca("Math.hypot",function(a){return a?a:function(a,d,c){a=Number(a);d=Number(d);var b,g=Math.max(Math.abs(a),Math.abs(d));for(b=2;b<arguments.length;b++)g=Math.max(g,Math.abs(arguments[b]));if(1E100<g||1E-100>g){if(!g)return g;a/=g;d/=g;var h=a*a+d*d;for(b=2;b<arguments.length;b++){var k=Number(arguments[b])/g;h+=k*k}return Math.sqrt(h)*g}h=a*a+d*d;for(b=2;b<arguments.length;b++)k=Number(arguments[b]),h+=k*k;return Math.sqrt(h)}});function da(a,b){this.x=a;this.y=b};function f(a,b,d,c){this.X=a;this.Y=b;this.ba=a+d;this.ca=b+c;this.left=this.X;this.top=this.Y;this.width=d;this.height=c;this.v=function(){return new da((this.X+this.ba)/2|0,(this.Y+this.ca)/2|0)};this.a=function(a){return this.X<=a.ba&&this.ba>=a.X&&this.Y<=a.ca&&this.ca>=a.Y}};function ea(){this.i=!1;this.s=this.h=0}ea.prototype.update=function(){this.i?(this.h++,this.s=0):(this.h=0,this.s++)};function fa(a){this.keys=Array(256);for(var b=0;256>b;b++)this.keys[b]=new ea;a.tabIndex=0;var d=this;a.addEventListener("keydown",function(a){ha(d,a,!0)});a.addEventListener("keyup",function(a){ha(d,a,!1)})}fa.prototype.update=function(){for(var a=0;256>a;a++)this.keys[a].update()};function ha(a,b,d){b.stopPropagation();b.preventDefault();b=b.keyCode;0<=b&&256>b&&(a.keys[b].i=d)};function ia(a){this.a=a;this.D=this.C=this.c=this.b=this.y=this.x=0;this.i=!1;this.s=this.h=0;a=a.b;var b=this.g.bind(this);a.addEventListener("mousedown",b);a.addEventListener("mouseup",b);a.addEventListener("mousemove",b);a.addEventListener("contextmenu",b);b=this.da.bind(this);a.addEventListener("touchstart",b);a.addEventListener("touchend",b);a.addEventListener("touchcancel",b);a.addEventListener("touchmove",b)}
ia.prototype.update=function(){this.C=this.x-this.b;this.D=this.y-this.c;this.b=this.x;this.c=this.y;this.i?(this.h++,this.s=0):(this.h=0,this.s++)};ia.prototype.g=function(a){a.stopPropagation();a.preventDefault();ja(this,a.clientX,a.clientY);"mousedown"===a.type&&(this.i=!0,this.a.b.focus());"mouseup"===a.type&&(this.i=!1)};ia.prototype.da=function(a){a.stopPropagation();a.preventDefault();0<a.touches.length?(a=a.touches[0],ja(this,a.clientX,a.clientY),this.i=!0):this.i=!1};
function ja(a,b,d){var c=a.a.b.getBoundingClientRect(),e=c.width/c.height;if(.01<e-a.a.aspectRatio){var g=a.a.aspectRatio*c.height;c=new f(Math.floor((c.width-g)/2),0,g,c.height)}-.01>e-a.a.aspectRatio&&(e=c.width/a.a.aspectRatio,c=new f(0,Math.floor((c.height-e)/2),c.width,e));a.x=a.a.width*(b-c.left)/c.width|0;a.y=a.a.height*(d-c.top)/c.height|0}function ka(a,b,d,c){return l.x>=a&&l.x<a+d&&l.y>=b&&l.y<b+c};var la=[0,-1,1,0],ma=[-1,0,0,1],na=[1,1,1,1];function oa(a,b,d){b=pa(a,a.VERTEX_SHADER,b);d=pa(a,a.FRAGMENT_SHADER,d);var c=a.createProgram();a.attachShader(c,b);a.attachShader(c,d);a.linkProgram(c);return c}function pa(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b}
function qa(a){var b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);var d=a.RGBA,c=a.RGBA,e=a.UNSIGNED_BYTE;a.texImage2D(a.TEXTURE_2D,0,d,1,1,0,c,e,new Uint8Array([0,0,0,0]));var g=new Image;g.onload=function(){a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,d,c,e,g);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.NEAREST);a.generateMipmap(a.TEXTURE_2D);b.loaded=!0;b.width=g.width;b.height=g.height};g.src="img/graphics.png";return b};function ra(a,b){this.x=a;this.y=b;this.La=0;this.I=!0;this.Ia=this.visible=!1;this.Ea=this.$=0;this.Ha=null}function sa(){this.height=this.width=256;this.Ja=null;this.ea=new Uint8Array(262144);this.Oa=new Float32Array([256,256]);this.clear()}sa.prototype.clear=function(){for(var a=0;a<this.ea.length;a++)this.ea[a]=255};
sa.prototype.Ga=function(a){this.Ja=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.Ja);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.ea);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)};
function ta(){this.height=this.width=256;this.f=Array(256);this.b=Array(3);this.ka=new Float32Array(2);for(var a=0;256>a;a++){this.f[a]=Array(256);for(var b=0;256>b;b++)this.f[a][b]=new ra(b,a)}for(a=0;3>a;a++)this.b[a]=new sa}
ta.prototype.Ga=function(a){this.da=a;this.za=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.za);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,1,-1,1,1,1,1,1,0,-1,-1,0,1,1,1,1,0,-1,1,0,0]),a.STATIC_DRAW);this.a=oa(a,"precision highp float;attribute vec2 position;attribute vec2 texture;varying vec2 pixelCoord;varying vec2 texCoord;uniform vec2 viewOffset;uniform vec2 viewportSize;uniform vec2 mapSize;void main(void) {   pixelCoord = (texture * viewportSize) + viewOffset;   texCoord = pixelCoord / mapSize / 16.0;   gl_Position = vec4(position, 0.0, 1.0);}","precision highp float;varying vec2 pixelCoord;varying vec2 texCoord;uniform sampler2D tiles;uniform sampler2D sprites;void main(void) {   vec4 tile = texture2D(tiles, texCoord);   if(tile.x == 1.0 && tile.y == 1.0) { discard; }   vec2 spriteOffset = floor(tile.xy * 256.0) * 16.0;   vec2 spriteCoord = mod(pixelCoord, 16.0);   gl_FragColor = texture2D(sprites, (spriteOffset + spriteCoord) / 1024.0);   gl_FragColor.a = tile.a;}");
this.ya=a.getAttribLocation(this.a,"position");this.ta=a.getAttribLocation(this.a,"texture");this.Na=a.getUniformLocation(this.a,"viewportSize");this.Ma=a.getUniformLocation(this.a,"viewOffset");this.Aa=a.getUniformLocation(this.a,"mapSize");this.Ca=a.getUniformLocation(this.a,"tiles");this.Ba=a.getUniformLocation(this.a,"sprites");for(var b=0;b<this.b.length;b++)this.b[b].Ga(a)};
function n(a,b,d,c){var e=q;e.f[b][a].La=d;e.f[b][a].I=c;c=e.b[0];a=4*(b*c.width+a);c.ea[a]=0===d?255:(d-1)%64|0;c.ea[a+1]=0===d?255:(d-1)/64|0}function r(a,b,d){return 0>b||b>=a.width||0>d||d>=a.height?null:a.f[d][b]}function ua(a,b){return(a=r(q,a,b))?a.La:0}function t(a,b){a=r(q,a,b);return!a||a.I}ta.prototype.W=function(a,b){return(a=r(this,a,b))&&a.visible};ta.prototype.W=function(a,b){return a<this.G||a>this.c||b<this.J||b>this.g?!1:this.f[b][a].visible};function va(){var a=q,b=x.x/16|0,d=x.y/16|0;a.qa=b;a.sa=d;a.G=Math.max(0,b-12);a.J=Math.max(0,d-12);a.c=Math.min(a.width-1,b+12);a.g=Math.min(a.height-1,d+12);for(var c=a.J;c<=a.g;c++)for(var e=a.G;e<=a.c;e++)a.f[c][e].Ia|=a.f[c][e].visible,a.f[c][e].visible=!1;a.f[d][b].visible=!0;wa(a,1,1);xa(a,1,1);wa(a,1,-1);xa(a,1,-1);wa(a,-1,1);xa(a,-1,1);wa(a,-1,-1);xa(a,-1,-1)}
function wa(a,b,d){var c=[],e=[],g=1,h=0,k=0,u=0,m,p;for(p=a.sa+d;p>=a.J&&p<=a.g;p+=d,k=h,++g){var B=.5/g;var w=-1;var I=Math.floor(u*g+.5);for(m=a.qa+I*b;I<=g&&m>=a.G&&m<=a.c;m+=b,++I,w=C){var E=!0;var W=!1;var N=I/g;var C=N+B;if(0<k)if(a.f[p-d][m].visible&&!a.f[p-d][m].I||a.f[p-d][m-b].visible&&!a.f[p-d][m-b].I)for(var v=0;v<k&&E;++v){if(w<=e[v]&&C>=c[v])if(a.f[p][m].I)if(w>=c[v]&&C<=e[v]){E=!1;break}else c[v]=Math.min(c[v],w),e[v]=Math.max(e[v],C),W=!0;else if(N>c[v]&&N<e[v]){E=!1;break}}else E=
!1;E&&(a.f[p][m].visible=!0,a.f[p][m].I&&(u>=w?u=C:W||(c[h]=w,e[h++]=C)))}}}
function xa(a,b,d){var c=[],e=[],g=1,h=0,k=0,u=0,m,p;for(m=a.qa+b;m>=a.G&&m<=a.c;m+=b,k=h,++g){var B=.5/g;var w=-1;var I=Math.floor(u*g+.5);for(p=a.sa+I*d;I<=g&&p>=a.J&&p<=a.g;p+=d,++I,w=C){var E=!0;var W=!1;var N=I/g;var C=N+B;if(0<k)if(a.f[p][m-b].visible&&!a.f[p][m-b].I||a.f[p-d][m-b].visible&&!a.f[p-d][m-b].I)for(var v=0;v<k&&E;++v){if(w<=e[v]&&C>=c[v])if(a.f[p][m].I)if(w>=c[v]&&C<=e[v]){E=!1;break}else c[v]=Math.min(c[v],w),e[v]=Math.max(e[v],C),W=!0;else if(N>c[v]&&N<e[v]){E=!1;break}}else E=
!1;E&&(a.f[p][m].visible=!0,a.f[p][m].I&&(u>=w?u=C:W||(c[h]=w,e[h++]=C)))}}};function ya(a){this.da=a;var b=oa(a,"uniform vec2 u_viewportSize;attribute vec2 a_position;attribute vec2 a_texCoord;attribute vec4 a_color;varying vec2 v_texCoord;varying vec4 v_color;void main() {vec2 zeroToOne = a_position / u_viewportSize;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;v_color = a_color;}","precision mediump float;uniform sampler2D u_image;varying vec2 v_texCoord;varying vec4 v_color;void main() {gl_FragColor = texture2D(u_image, v_texCoord);if (gl_FragColor.a < 0.1) discard;if (v_color.a > 0.5) gl_FragColor = v_color;}");
this.Aa=b;this.Ca=a.getUniformLocation(b,"u_viewportSize");this.qa=a.getAttribLocation(b,"a_position");this.sa=a.getAttribLocation(b,"a_texCoord");this.W=a.getAttribLocation(b,"a_color");this.J=new Float32Array(2);this.ta=a.createBuffer();this.Ba=a.createBuffer();this.ya=a.createBuffer();this.ra=qa(a);this.b=new Float32Array(65536);this.a=0;this.c=new Float32Array(65536);this.g=0;this.ka=new Uint8Array(65536);this.za=new DataView(this.ka.buffer);this.G=0}
function y(a,b,d,c){var e=z.c;a=a.toUpperCase().split("\n");for(var g=0;g<a.length;g++)for(var h=0;h<a[g].length;h++){var k=a[g].charCodeAt(h);33<=k&&127>=k&&za(e,b+4*h,d+8*g,8*(k-33),0,8,10,c)}}
function za(a,b,d,c,e,g,h,k,u,m){var p=a.ra;if(p.loaded){u=b+Math.abs(void 0!==u?u:g);m=d+(void 0!==m?m:h);var B=c/p.width,w=e/p.height;c=(c+g)/p.width;e=(e+h)/p.height;k=k||0;a.b[a.a++]=b;a.b[a.a++]=d;a.b[a.a++]=u;a.b[a.a++]=d;a.b[a.a++]=b;a.b[a.a++]=m;a.c[a.g++]=B;a.c[a.g++]=w;a.c[a.g++]=c;a.c[a.g++]=w;a.c[a.g++]=B;a.c[a.g++]=e;a.b[a.a++]=b;a.b[a.a++]=m;a.b[a.a++]=u;a.b[a.a++]=d;a.b[a.a++]=u;a.b[a.a++]=m;a.c[a.g++]=B;a.c[a.g++]=e;a.c[a.g++]=c;a.c[a.g++]=w;a.c[a.g++]=c;a.c[a.g++]=e;for(b=0;6>b;b++)a.za.setUint32(a.G,
k,!1),a.G+=4}};function Aa(a){var b=a.getContext("webgl",{alpha:!1,antialias:!1});if(b){this.b=a;this.options={};this.da=b;this.aspectRatio=this.height=this.width=1;this.a={x:1,y:1};b.disable(b.DEPTH_TEST);b.enable(b.BLEND);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);this.c=new ya(b);this.J=new fa(a);this.keys=this.J.keys;this.g=new ia(this);q=new ta;A=[];D=[];F=[];for(a=0;4>a;a++){D.push(Array(4));for(var d=0;4>d;d++)D[a][d]=null}for(a=0;10>a;a++){d={level:a,x:0,y:0,parent:null,Z:0,children:[],xa:[]};if(0===
a)d.x=Math.floor(4*Math.random()),d.y=Math.floor(4*Math.random());else{var c=F[Math.floor(Math.random()*F.length)];c.children.push(d);c.Z--;d.parent=c;0<c.x&&!D[c.y][c.x-1]&&(d.x=c.x-1,d.y=c.y);0<c.y&&!D[c.y-1][c.x]&&(d.x=c.x,d.y=c.y-1);3>c.x&&!D[c.y][c.x+1]&&(d.x=c.x+1,d.y=c.y);3>c.y&&!D[c.y+1][c.x]&&(d.x=c.x,d.y=c.y+1)}d.rect=new f(40*d.x,40*d.y,40,40);A.push(d);D[d.y][d.x]=d;F=[];for(d=0;d<A.length;d++)c=A[d],c.Z=0,0<c.x&&!D[c.y][c.x-1]&&c.Z++,0<c.y&&!D[c.y-1][c.x]&&c.Z++,3>c.x&&!D[c.y][c.x+1]&&
c.Z++,3>c.y&&!D[c.y+1][c.x]&&c.Z++,3>d&&0<c.children.length&&(c.Z=0),0<c.Z&&F.push(c)}for(a=0;a<A.length;a++){var e=Ba[a];d=A[a];c=d.xa;var g=new f(d.rect.X+1,d.rect.v().y-2,5,5);g.va=!0;G(g);c.push(g);g=new f(d.rect.ba-5,d.rect.v().y-2,5,5);g.va=!0;G(g);c.push(g);g=new f(d.rect.v().x-2,d.rect.Y+1,5,5);g.va=!0;G(g);c.push(g);g=new f(d.rect.v().x-2,d.rect.ca-5,5,5);g.va=!0;G(g);for(c.push(g);c.length<e.N;){g=H(e.S,e.P);var h=H(e.R,e.O);g=new f(H(d.rect.X+2,d.rect.ba-g-3),H(d.rect.Y+2,d.rect.ca-h-3),
g,h);h=!1;for(var k=0;k<c.length;k++)if(g.a(c[k])){h=!0;break}h||(G(g),c.push(g))}for(e=c.length-1;0<e;e--)h=Math.floor(Math.random()*(e+1)),g=c[e],c[e]=c[h],c[h]=g;for(e=1;e<c.length;e++)g=c[e].v(),h=c[e-1].v(),.5>Math.random()?(Ca(h.x,g.x,h.y),Da(h.y,g.y,g.x)):(Da(h.y,g.y,h.x),Ca(h.x,g.x,g.y));d.parent&&(d.parent.x<d.x?Ca(d.rect.X-3,d.rect.X+3,d.rect.v().y):d.parent.x>d.x?Ca(d.rect.ba-3,d.rect.ba+3,d.rect.v().y):d.parent.y<d.y?Da(d.rect.Y-3,d.rect.Y+3,d.rect.v().x):d.parent.y>d.y&&Da(d.rect.ca-
3,d.rect.ca+3,d.rect.v().x))}for(a=0;256>a;a++)for(d=0;256>d;d++)t(d,a)&&(t(d,a+1)?0!==ua(d,a)&&0===ua(d,a+1)?n(d,a,J(K(d,a).H),!0):t(d,a-1)&&t(d-1,a)&&t(d+1,a)&&t(d-1,a-1)&&t(d+1,a-1)&&t(d-1,a+1)&&t(d+1,a+1)||n(d,a,J(K(d,a).H)+6,!0):n(d,a,J(K(d,a).H),!0));x={o:0,name:"Player",x:16*A[0].xa[0].v().x,y:16*A[0].xa[0].v().y,C:0,D:0,direction:2,j:100,ha:100,m:1,B:0,V:2,u:null,l:null,path:null,oa:0,wa:100,Ka:100,fa:0,ia:10,level:1,Pa:[],ua:[Ea,Fa],ga:null,cursor:new da(0,0)};a={aa:0,name:"Radio",x:x.x+
32,y:x.y-32};d={aa:1,name:"Blaster",x:x.x+32,y:x.y+32};L=[x];M=[a,d];O=[];P={x:0,y:0};x.l=null;for(a=0;a<A.length;a++)for(d=A[a],c=Ba[a],e=d.xa,g=1;g<e.length;g++)if(!e[g].va){h=e[g].v();k=H(c.M,c.L+1);for(var u=0;u<k;u++){var m=Ga(h.x,h.y);if(!m)break;var p=J(c.K);L.push({o:p,level:d.level+1,name:Ha[p].name,x:16*m.T,y:16*m.U,C:0,D:0,direction:2,j:10+5*d.level,ha:10+5*d.level,m:1,B:0,V:4,wa:10})}8===g&&M.push({aa:2,name:"Blue Key",x:16*h.x+32,y:16*h.y+32})}va();Ia(Ja[4]);q.Ga(b);window.addEventListener("resize",
this.G.bind(this),!1);this.G();this.W()}}
Aa.prototype.G=function(){var a=window.innerWidth,b=window.innerHeight;var d=a>b?Math.max(1,Math.min(Math.floor(a/320),Math.floor(b/180))):Math.max(1,Math.min(Math.floor(a/180),Math.floor(b/320)));this.width=Math.round(a/d);this.height=Math.round(b/d);this.aspectRatio=this.width/this.height;this.a.x=this.width/2|0;this.a.y=this.height/2|0;this.b.width=this.width;this.b.height=this.height;this.b.style.left="0";this.b.style.top="0";this.b.style.width=a+"px";this.b.style.height=b+"px"};
Aa.prototype.W=function(){this.J.update();this.g.update();var a=this.da;a.viewport(0,0,this.width,this.height);a.clearColor(0,0,0,1);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);this.c.a=0;this.c.g=0;this.c.G=0;this.update&&this.update();a=this.c;var b=this.width,d=this.height;if(a.ra.loaded){var c=a.da;c.useProgram(a.Aa);a.J[0]=b;a.J[1]=d;c.uniform2fv(a.Ca,a.J);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,a.ra);c.enableVertexAttribArray(a.qa);c.bindBuffer(c.ARRAY_BUFFER,a.ta);c.bufferData(c.ARRAY_BUFFER,
a.b,c.DYNAMIC_DRAW);c.vertexAttribPointer(a.qa,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(a.sa);c.bindBuffer(c.ARRAY_BUFFER,a.Ba);c.bufferData(c.ARRAY_BUFFER,a.c,c.DYNAMIC_DRAW);c.vertexAttribPointer(a.sa,2,c.FLOAT,!1,0,0);c.enableVertexAttribArray(a.W);c.bindBuffer(c.ARRAY_BUFFER,a.ya);c.bufferData(c.ARRAY_BUFFER,a.ka,c.DYNAMIC_DRAW);c.vertexAttribPointer(a.W,4,c.UNSIGNED_BYTE,!0,0,0);c.drawArrays(c.TRIANGLES,0,a.a/2)}requestAnimationFrame(this.W.bind(this))};
function Q(a,b,d,c,e,g,h,k,u){za(z.c,a,b,d,c,e,g,h,k,u)}function R(a,b,d,c){y(a,b-4*a.length/2|0,d,c)};var Ka=[2,0,1,3],Ha=[{name:"PLAYER",x:0,y:0},{name:"SCIENTIST",x:3,y:0},{name:"SPIDER",x:0,y:6},{name:"HATCHER",x:1,y:6},{name:"SLIMER",x:2,y:6},{name:"FLOATER",x:0,y:8},{name:"CLONER",x:3,y:8},{name:"ALIEN",x:0,y:2},{name:"QUEEN",x:1,y:2}],La=[{x:7,y:13},{x:0,y:14},{x:1,y:9}];var Ba=[{N:10,S:5,P:12,R:5,O:8,M:1,L:1,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[2,1]]},{N:10,S:5,P:12,R:5,O:8,M:1,L:2,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.5],[3,.5]]},{N:10,S:5,P:12,R:5,O:8,M:1,L:2,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]},{N:10,S:5,P:12,
R:5,O:8,M:1,L:2,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[2,.333],[3,.333],[4,.333]]},{N:10,S:5,P:12,R:5,O:8,M:1,L:2,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[7,.5],[3,.25],[4,.25]]},{N:10,S:5,P:12,R:5,O:8,M:1,L:3,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[7,.5],[3,.25],[4,.25]]},{N:10,S:5,P:12,
R:5,O:8,M:1,L:3,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.6],[82,.1],[83,.1],[84,.1],[86,.1]],K:[[7,.5],[3,.25],[4,.25]]},{N:10,S:5,P:12,R:5,O:8,M:1,L:3,F:[[593,.33],[594,.33],[595,.33]],H:[[81,.1],[82,.1],[83,.1],[84,.1],[86,.1],[145,.1],[146,.1],[147,.1],[148,.1],[150,.1]],K:[[7,.5],[5,.3],[3,.1],[4,.1]]},{N:8,S:5,P:12,R:5,O:8,M:2,L:4,F:[[593,.33],[594,.33],[595,.33]],H:[[209,.6],[210,.1],[211,.1],[212,.1],[214,.1]],K:[[7,.5],[6,.3],[3,.1],[4,.1]]},{N:5,S:20,P:25,R:10,O:15,M:8,L:12,F:[[593,.33],
[594,.33],[595,.33]],H:[[209,.2],[210,.2],[211,.2],[212,.2],[214,.2]],K:[[8,.5],[7,.15],[5,.15],[6,.15],[3,.05]]}],q=null,A=null,D=null,F=null;function G(a){var b=a.X,d=a.ba,c=a.ca;for(a=a.Y;a<c;a++)for(var e=b;e<d;e++)n(e,a,J(K(e,a).F),!1)}function Ca(a,b,d){for(var c=Math.min(a,b);c<=Math.max(a,b);c++)n(c,d,J(K(c,d).F),!1)}function Da(a,b,d){for(var c=Math.min(a,b);c<=Math.max(a,b);c++)n(d,c,J(K(d,c).F),!1)}function H(a,b){return Math.floor(Math.random()*(b-a)+a)}
function K(a,b){a=a/40|0;b=b/40|0;b=0>a||4<=a||0>b||4<=b?null:D[b][a];return Ba[(b?b.level:0)%Ba.length]}function J(a){for(var b=Math.random(),d=0,c=0;c<a.length;c++)if(d+=a[c][1],b<d)return a[c][0];return a[a.length-1][0]};var Ma=[{w:"Ok hotshot, teleportation complete.\nSystem check. Do you remember the mission?",options:[{text:"ROGER",A:"dialog",ja:4},{text:"UH WHAT?",A:"dialog",ja:1}]},{w:"Mother frakking... Teleportation glitch.\nYou're a lost cause. Want advice anyway?",options:[{text:"YES",A:"dialog",ja:2},{text:"NO",A:"dialog",ja:3}]},{w:"Alright.  Your brain is mush, but we'll try.\nFind the blaster in the room.",options:[{text:"COPY",A:"quest",pa:0}]},{w:"Alright.  Your brain is mush, and you're\nballs deep in aliens who want to kill you.  Good luck.",
options:[{text:"BYE"}]},{w:"Good. How do you wanna run this, soldier?\nWant me to guide you, or comms off?",options:[{text:"GUIDE",A:"dialog",ja:5},{text:"COMMS OFF",A:"dialog",ja:6}]},{w:"Alright.  First things first:\nFind the blaster in the room.",options:[{text:"OK",A:"quest",pa:0}]},{w:"Alright.  You know what you're doing.\nGo get em.",options:[{text:"OVER AND OUT"}]},{w:"Good.  Radar shows alien blood nearby.\nGo kill that ugly bastard.",options:[{text:"ACCEPT",A:"quest",pa:1},{text:"IGNORE"}]},
{w:"Not bad, soldier.  That took guts.\nFind a BLUE key to get out of this sector.",options:[{text:"ACCEPT",A:"quest",pa:2},{text:"IGNORE"}]},{w:"Excellent.  Let's get the frak out of here.\nFind the BLUE door to move to the next sector.",options:[{text:"ACCEPT",A:"quest",pa:3},{text:"IGNORE"}]}],S=!1,Na=0,Oa=0,Pa;var Ja=[{title:"Find blaster",la:"item",aa:1,ma:7},{title:"First blood",la:"kill",o:7,ma:8},{title:"Blue keycard",la:"item",aa:2,ma:9},{title:"Blue door",la:"item",aa:2,ma:9},{title:"Pick up radio",la:"item",aa:0,ma:0}],T=[];function Ia(a){U("Quest accepted: "+a.title,4294902015);T.push(a)}function Qa(a){U("Quest complete: "+a.title,4294902015);void 0!==a.ma&&(a=a.ma,S=!0,Pa=!1,Na=a,Oa=Ra)};var Sa=[];function Ta(a,b,d,c,e,g,h,k){Sa.push({Da:a,x:b,y:d,C:c,D:e,duration:g,Ta:h,color:k,frame:0})};var Ea={Sa:!0,Ra:1,Qa:10,Fa:new da(256,448),na:function(a,b,d){if(d){a.direction=Ua(a.x,a.y,d.x,d.y);Va(a,d,5);b=a.x;var c=a.y;Ta(3,b,c,Math.round((d.x-b)/10),Math.round((d.y-c)/10),10);Ta(1,d.x,d.y,0,0,18);a.B=36;a.wa--}}},Fa={Sa:!0,Ra:1,Qa:10,Fa:new da(480,416),na:function(a,b){b&&(a.direction=Ua(a.x,a.y,16*b.x,16*b.y),a.x=16*b.x,a.y=16*b.y,a.m=0,a.B=1)}};function Ua(a,b,d,c){a=d-a;b=c-b;return Math.abs(a)>=Math.abs(b)?0>a?3:1:0>b?0:2};var z=null,Wa=0,Xa=0,V=0,Ra=0,x=null,L=null,M=null,O=null,P=null,Ya=!1,X=null,l=null,Za=0;
function $a(a,b){x.l=Y(a,b);if(x.l)x.u=null,x.path=null;else if(a=r(q,a,b),a!==x.u){var d=x.x/16|0,c=x.y/16|0;x.u=a;a=x;a:{b=x.u;for(var e=q,g=0;g<e.height;g++)for(var h=0;h<e.width;h++){var k=e.f[g][h];k.$=Infinity;k.Ea=Math.min(Math.abs(h-b.x),Math.abs(g-b.y));k.Ha=null}d=q.f[c][d];d.$=0;for(d=[d];0<d.length;){c=null;e=-1;g=Infinity;for(h=0;h<d.length;h++)k=d[h],Infinity!==k.$&&k.$+k.Ea<g&&(c=k,e=h,g=k.$+k.Ea);d.splice(e,1);if(c.x===b.x&&c.y===b.y){b=[];for(d=c;d;)b.push(d),d=d.Ha;b.reverse();break a}for(e=
0;e<la.length;e++)if(g=c.x+la[e],h=c.y+ma[e],0<=g&&g<q.width&&0<=h&&h<q.height){k=q.f[h][g];var u=c.$+na[e];u<k.$&&20>=u&&!q.f[h][g].I&&(k.$=u,k.Ha=c,d.push(k))}}b=null}a.path=b;x.oa=0}}function ab(a){return a.x+16>=P.x&&a.y+16>=P.y&&a.x<P.x+z.width&&a.y<P.y+z.height&&q.W(a.x/16|0,a.y/16|0)}function Y(a,b){for(var d=0;d<L.length;d++){var c=L[d];if(!(0>=c.j)&&(c.x/16|0)===a&&(c.y/16|0)===b)return c}return null}
function Ga(a,b){for(var d=0;20>d;d++){for(var c=a-d;c<=a+d;c++){var e=b-d;if(!t(c,e)&&null===Y(c,e))return{T:c,U:e};e=b+d;if(!t(c,e)&&null===Y(c,e))return{T:c,U:e}}for(c=b-d;c<=b+d;c++){e=a-d;if(!t(e,c)&&null===Y(e,c))return{T:e,U:c};e=a+d;if(!t(e,c)&&null===Y(e,c))return{T:e,U:c}}}return null}
function Z(a,b,d,c){a.direction=c;var e=Math.hypot(b,d);c=Math.floor(a.x/16)+b/e;e=Math.floor(a.y/16)+d/e;if(t(c,e))return!1;if(c=Y(c,e)){if(0===a.o===(0===c.o))return!1;Va(a,c,Math.max(1,2+2*(a.level-c.level)));a.B=18;Ta(1,c.x,c.y,0,0,18);return!0}a.C=b;a.D=d;a.B=16/Math.max(Math.abs(b),Math.abs(d));return!0}
function Va(a,b,d){b.j-=d;Ta(2,b.x+8,b.y-4,0,0,40,d.toString(),4278190335);if(0>=b.j){b.j=0;U(b.name+" died",4278190335);b===x.l&&(x.l=null);if(3===b.o)for(U(b.name+" spawns hatchlings",8388863),d=0;3>d;d++){var c=Ga(b.x/16|0,b.y/16|0);if(!c)break;L.push({o:2,level:1,name:Ha[2].name,x:16*c.T,y:16*c.U,C:0,D:0,direction:2,j:10,ha:10,m:1,B:0,V:4})}if(0===a.o){a=5*b.level;x.fa+=a;for(Ta(2,x.x+8,x.y-4,0,0,40,"+"+a,4278255615);x.fa>=x.ia;)x.fa-=x.ia,x.ia*=2,x.level++,U("You are now level "+x.level,16711935);
for(a=T.length-1;0<=a;a--)d=T[a],"kill"===d.la&&d.o===b.o&&(T.splice(a,1),Qa(d))}}}function U(a,b){O.push({text:a,color:b});5<O.length&&O.splice(0,O.length-5)}function bb(){0===V&&L.sort(function(a,d){return Math.hypot(a.x-x.x,a.y-x.y)-Math.hypot(d.x-x.x,d.y-x.y)});V++;if(V>=L.length)for(var a=V=0;a<L.length;a++)0<L[a].j&&(L[a].m=1)}function cb(a){if(S){var b=Ma[Na];0>a||a>b.options.length||(a=b.options[a],"dialog"===a.A?(a=a.ja,S=!0,Pa=!1,Na=a,Oa=Ra):"quest"===a.A?(S=!1,Ia(Ja[a.pa])):S=!1)}}
function db(){if(S){if(!(30>Ra-Oa)){var a=(z.width-160)/2|0,b=(z.height-160)/2|0;1===X[32].s?Pa=!0:1===X[49].s||1===l.s&&ka(a,b+64,80,8)?cb(0):(1===X[50].s||1===l.s&&ka(a,b+80,80,8))&&cb(1)}}else if(Ya)1===X[78].h&&(Ya=!1);else if(0<x.j)for(;;){a=L[V];if(0<a.m&&0===a.B)if(0===V)if(0>=x.j)x.m=0;else{var d=x.x/16|0;b=x.y/16|0;if(0!==l.C||0!==l.D)x.cursor.x=l.x,x.cursor.y=l.y,x.cursor.T=(P.x+x.cursor.x)/16|0,x.cursor.U=(P.y+x.cursor.y)/16|0;if(x.ga)if(1===X[98].h||1===X[40].h)x.cursor.y+=16,x.cursor.U++;
else if(1===X[100].h||1===X[37].h)x.cursor.x-=16,x.cursor.T--;else if(1===X[102].h||1===X[39].h)x.cursor.x+=16,x.cursor.T++;else if(1===X[104].h||1===X[38].h)x.cursor.y-=16,x.cursor.U--;else if(1===X[27].h)x.u=null,x.path=null,x.ga=null;else{if(1===X[13].h||1===l.s)$a(x.cursor.T,x.cursor.U),b=x.ga,b.na&&b.na(x,x.u,x.l),x.ga=null,x.u=null,x.l=null,x.path=null}else if(l.i&&l.y<z.height-24)$a((P.x+l.x)/16|0,(P.y+l.y)/16|0);else if(1===X[27].h&&x.l&&(x.l=null),1===X[9].h){b=x.l?L.indexOf(x.l):0;for(var c=
b+1;0===c||c>=L.length||0>=L[c].j||!ab(L[c]);)if(c++,c>=L.length&&(c=0),c===b){c=-1;break}0<c?x.l=L[c]:x.l=null}else if(1===X[78].h)Ya=!0;else{c=null;if(x.path){for(c=x.path[x.oa];c&&c.x===d&&c.y===b;)x.oa++,c=x.oa<x.path.length?x.path[x.oa]:null;c&&Y(c.x,c.y)&&(c=null);c||(x.u=null,x.path=null)}var e=X[100].i||X[37].i||c&&c.x<d;d=X[102].i||X[39].i||c&&c.x>d;var g=X[104].i||X[38].i||c&&c.y<b,h=X[101].i;X[98].i||X[40].i||c&&c.y>b?Z(x,0,x.V,2):e?Z(x,-x.V,0,3):h?x.m=0:d?Z(x,x.V,0,1):g&&Z(x,0,-x.V,0);
for(b=0;b<x.ua.length;b++)if(c=x.ua[b],1===X[49+b].h||1===z.g.s&&ka(24*b,z.height-24,24,24))x.l?c.na(x,x.u,x.l):(x.ga=c,x.cursor.x=x.x-P.x,x.cursor.y=x.y-P.y,x.cursor.T=(P.x+x.cursor.x)/16|0,x.cursor.U=(P.y+x.cursor.y)/16|0)}}else 0>=a.j?a.m=0:ab(a)?7===a.o?(Ea.na(a,null,x),a.m=0):x.x<a.x&&Z(a,-a.V,0,3)||x.x>a.x&&Z(a,a.V,0,1)||x.y<a.y&&Z(a,0,-a.V,0)||x.y>a.y&&Z(a,0,a.V,2)||0!==a.C||0!==a.D||(a.m=0):a.m=0;if(0<a.B){if(0!==a.C||0!==a.D)a.x+=a.C,a.y+=a.D;a.B--;if(0===a.B&&(a.C=0,a.D=0,a.m--,0===a.o)){for(b=
M.length-1;0<=b;b--)if(c=M[b],c.x===a.x&&c.y===a.y)for(M.splice(b,1),x.Pa.push(c),U("Picked up: "+c.name,16777215),e=T.length-1;0<=e;e--)d=T[e],"item"===d.la&&d.o===c.o&&(T.splice(e,1),Qa(d));va()}}0===a.B&&0>=a.m&&(a.m=0,bb());if(0===V&&0<a.m)break;if(0<a.B)break}X[65].i&&(Za=10);Xa++;16<Xa&&(Xa=0,Wa++);if(z.c.ra&&z.c.ra.loaded){P.x=Math.max(0,x.x-(z.width/2|0)+8);P.y=Math.max(0,x.y-(z.height/2|0)+8);0<Za--&&(P.x+=4*Math.random()-2,P.y+=4*Math.random()-2);if(S){if(S&&(a=(z.width-160)/2|0,b=(z.height-
160)/2|0,Q(a+64,b,128,608,32,32),c=Ma[Na],e=Ra-Oa,e=Pa?c.w.length:Math.min(c.w.length,Math.floor(e/2)),y(c.w.substr(0,e),a,b+32,void 0),e===c.w.length))for(e=0;e<c.options.length;e++)y(c.options[e].text,a,b+64+16*e,void 0)}else{a=q;b=P.x;c=P.y;h=z.width;var k=z.height;e=a.da;e.enable(e.BLEND);e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);e.useProgram(a.a);e.bindBuffer(e.ARRAY_BUFFER,a.za);e.enableVertexAttribArray(a.ya);e.enableVertexAttribArray(a.ta);e.vertexAttribPointer(a.ya,2,e.FLOAT,!1,16,0);
e.vertexAttribPointer(a.ta,2,e.FLOAT,!1,16,8);a.ka[0]=h;a.ka[1]=k;e.uniform2fv(a.Na,a.ka);e.activeTexture(e.TEXTURE0);e.uniform1i(a.Ba,0);e.activeTexture(e.TEXTURE1);e.uniform1i(a.Ca,1);d=b/16|0;g=c/16|0;h=(b+h)/16|0;k=(c+k)/16|0;for(var u=0;u<a.b.length;u++){for(var m=a.b[u],p=g;p<=k;p++)for(var B=d;B<=h;B++){var w=a.W(B,p)?255:(w=r(a,B,p))&&w.Ia?144:0;m.ea[4*(p*m.width+B)+3]=w}e.uniform2f(a.Ma,b,c);e.uniform2fv(a.Aa,m.Oa);e.bindTexture(e.TEXTURE_2D,m.Ja);e.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,
m.height,e.RGBA,e.UNSIGNED_BYTE,m.ea);e.drawArrays(e.TRIANGLES,0,6)}x.u&&(a=16*x.u.x-P.x,b=16*x.u.y-P.y,c=640,t(x.u.x,x.u.y)&&(c=688),Q(a,b,c,176,16,16));x.ga&&Q(x.cursor.x,x.cursor.y,640,144,16,16);for(a=0;a<M.length;a++)b=M[a],ab(b)&&Q(b.x-P.x,b.y-P.y,256+16*La[b.aa].x,224+16*La[b.aa].y,16,16);for(a=0;a<L.length;a++)b=L[a],ab(b)&&(c=b.x-P.x,e=b.y-P.y,0>=b.j?(d=496,g=432):(d=16*(4*Ha[b.o].x+Ka[b.direction]),g=16*(2*Ha[b.o].y+Wa%2)+16),b===x.l&&Q(c,e,720,176,16,16),Q(c,e,d,g,16,16));for(a=Sa.length-
1;0<=a;a--)b=Sa[a],c=b.x-P.x,e=b.y-P.y,1===b.Da?Q(c,e,128+16*Math.floor(b.frame/6),304,16,16):2===b.Da?R(b.Ta,c,e-Math.min(4,Math.floor(b.frame/2)),b.color):3===b.Da&&Q(c,e,0,304,16,16),b.x+=b.C,b.y+=b.D,b.frame++,b.frame>=b.duration&&Sa.splice(a,1);for(b=a=0;b<L.length;b++)c=L[b],c!==x&&0>=c.j||!ab(c)||(c===x?(e=c.j/c.ha,y(c.name,1,a,void 0),Q(0,a+7,544,208,32,12),Q(2,a+9,544,224,8,8,void 0,Math.round(28*e)),y(c.j+"/"+c.ha,3,a+10,void 0),e=x.wa/x.Ka,y("AMMO",33,a,void 0),Q(32,a+7,544,208,32,12),
Q(34,a+9,552,224,8,8,void 0,Math.round(28*e)),y(c.wa+"/"+c.Ka,35,a+10,void 0),e=x.fa/x.ia,y("LEVEL "+x.level,65,a,void 0),Q(64,a+7,544,208,32,12),Q(66,a+9,568,224,8,8,void 0,Math.round(28*e)),y(c.fa+"/"+c.ia,67,a+10,void 0)):(e=c.j/c.ha,y(c.name+" ["+c.level+"]",1,a,void 0),Q(0,a+7,544,208,32,12),Q(2,a+9,560,224,8,8,void 0,Math.round(28*e)),y(c.j+"/"+c.ha,3,a+10,void 0)),a+=24);if(0<T.length)for(y("OBJECTIVES:",z.width-60,0,void 0),a=0;a<T.length;a++)y(T[a].title,z.width-60,8+8*a,void 0);a=z.height-
24-8*O.length;for(b=0;b<O.length;b++)y(O[b].text,1,a+8*b,O[b].color);for(a=0;6>a;a++)Q(24*a,z.height-24,512,208,24,24),a<x.ua.length&&(b=x.ua[a],Q(24*a+4,z.height-24+4,b.Fa.x,b.Fa.y,16,16));Ya&&(Q(0,0,512,256,144,144,128,z.width,z.height),a=(z.width-144)/2|0,b=(z.height-144)/2|0,Q(a,b,512,256,144,144),Q(a+10,b+9,480,416,16,16),y("2",a+21,b+19,16711935),Q(a+22,b+33,464,416,16,16),y("0",a+33,b+43,16711935),Q(a+22,b+57,624,160,16,16),y("0",a+33,b+67,16711935),Q(a+22,b+81,448,416,16,16),y("0",a+33,b+
91,16711935),Q(a+56,b+9,336,416,16,16),y("0",a+67,b+19,16711935),Q(a+68,b+33,336,448,16,16),y("0",a+79,b+43,16711935),Q(a+68,b+57,272,400,16,16),y("0",a+79,b+67,16711935),Q(a+68,b+81,400,432,16,16),y("0",a+79,b+91,16711935),Q(a+102,b+9,128,354,16,16),y("0",a+113,b+19,16711935),Q(a+114,b+33,592,160,16,16),y("0",a+125,b+43,16711935),Q(a+114,b+57,272,400,16,16),y("0",a+125,b+67,16711935),Q(a+114,b+81,352,400,16,16),y("0",a+125,b+91,16711935),y("1: Leap 2 squares",a+8,b+106,4294967295),y("2: Leap 3 squares",
a+8,b+114,4294967295),y("3: Leap 4 squares",a+8,b+122,16711935),y("4: Leap 5 squares",a+8,b+130,2155905279))}Ra++}};var eb=new Audio("https://static.cody.xyz/syndicate.lubiki.pl/synd_music_ingame_standard_final_mq.mp3");function fb(){R("STACIO",z.a.x,30);Q(z.a.x-16,z.a.y-16,640,208,32,32);if(1===z.keys[13].h||1===z.g.s)z.update=gb}function gb(){R("STACIO",z.a.x,30);R("NEW GAME",z.a.x,80);R("CONTINUE",z.a.x,90,2155905279);R("ENTER SEED",z.a.x,100);R("TUTORIAL",z.a.x,110);R("HIGH SCORES",z.a.x,120);R("CREDITS",z.a.x,130);if(1===z.keys[13].h||1===z.g.s)z.update=ka(z.a.x-20,130,40,10)?hb:db}
function hb(){R("STACIO",z.a.x,20);var a=z.a.x-40;y("CODE AND DESIGN:",a,40,2155905279);y("CODY.XYZ",a+20,50,void 0);y("GRAPHICS:",a,60,2155905279);y("ORYX DEISGN LAB",a+20,70,void 0);y("oryxdesignlab.com",a+20,80,void 0);y("FONT:",a,90,2155905279);y("LEXALOFFLE",a+20,100,void 0);y("LEXALOFFLE.COM",a+20,110,void 0);y("MUSIC:",a,120,2155905279);y("ERIC MATYAS",a+20,130,void 0);y("WWW.SOUNDIMAGE.ORG",a+20,140,void 0);if(1===z.keys[13].h||1===z.g.s)z.update=gb}
(function(){function a(){b.removeEventListener("click",a);eb.loop=!0;eb.play()}var b=document.querySelector("canvas");b.addEventListener("click",a);z=new Aa(b);z.update=fb;X=z.keys;l=z.g})();
